# @hugojosefson/env-config

Reads env variables into a config object.

[![Build Status](https://travis-ci.org/hugojosefson/env-config.svg?branch=master)](https://travis-ci.org/hugojosefson/env-config)
[![npm page](https://img.shields.io/npm/v/@hugojosefson/env-config)](https://npmjs.com/package/@hugojosefson/env-config)
[![License MIT](https://img.shields.io/npm/l/@hugojosefson/env-config)](https://tldrlegal.com/license/mit-license)
[![SemVer 2.0.0](https://img.shields.io/badge/SemVer-2.0.0-lightgrey)](https://semver.org/spec/v2.0.0.html)
[![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen)](https://standardjs.com)

## Usage

### Default

Simplest case, using defaults for everything. Uses `process.env` as its
`source`.

```js
import envConfig from '@hugojosefson/env-config'

const { DB_PORT, DB_USERNAME, DB_PASSWORD } = envConfig()
```

### Using options, for example to CamelCase key names

```js
import envConfig from '@hugojosefson/env-config'
import ra from 'ramda-adjunct'

const transformer = ra.renameKeysWith(camelcase)
const { dbPort, dbUsername, dbPassword } = envConfig({ transformer })
```

For more options, see [API](#api) below.

## Installation

```bash
yarn add @hugojosefson/env-config

  # or

npm install --save @hugojosefson/env-config
```

### Node.js version

- Node.js `>=8.0.0` for using this package in your app.
- Node.js `>=13.2.0` for running the developer tools to make changes to this
  repository.

_Note: If you use Node.js `<8.5.0`, you probably need to
`const envConfig = require('@hugojosefson/env-config')` instead of `import`._

## Features

### Reads files from `_FILE` vars

If any environment variable is suffixed with `_FILE`, it reads its value as a
file path, and replaces it with the file's contents. Also removes the `_FILE`
suffix.

For example, with an environment like this:

```bash
DB_PORT="5432"
DB_USERNAME="my_app"
DB_PASSWORD_FILE="/run/secrets/MY_APP_DB_PASSWORD"
```

...and the file `/run/secrets/MY_APP_DB_PASSWORD` containing:

    mNntp6J76p6pkK2tTgw2bEvC

...you will get this JS object as output:

```js
{
  DB_PORT: 5432,
  DB_USERNAME: 'my_app',
  DB_PASSWORD: 'mNntp6J76p6pkK2tTgw2bEvC'
}
```

### Parses any JSON

If any environment variable _can_ be parsed as JSON, it is. If not, it's still a
string.

For example, number strings are converted to numbers, `"true"` and `"false"` are
converted to the boolean values `true` and `false`, respectively.

It also supports large JSON objects and JSON arrays.

For example, with this environment:

```bash
SERVER='{"http":{"enable":true,"port":3000},"tls":{"enable":false}}'
TEXTS='{"greetings":["Hi!","Hello.","Welcome!"],"goodbyes":["So long","farewell","auf Wiedersehen","good night"]}'
```

...you will get this resulting JS object as output:

```js
{
  SERVER: {
    http: {
      enable: true,
      port: 3000,
    },
    tls: {
      enable: false,
    },
  },
  TEXTS: {
    greetings: ['Hi!', 'Hello.', 'Welcome!'],
    goodbyes: ['So long', 'farewell', 'auf Wiedersehen', 'good night'],
  },
}
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->
